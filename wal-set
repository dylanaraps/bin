#!/usr/bin/env bash
#
# Script to set colors generated by 'wal'
# https://github.com/dylanaraps/wal

# Source generated colors.
. "${HOME}/.cache/wal/colors.sh"

reload_dunst() {
    pkill dunst
    dunst \
        -lb "${color0:-#FFFFFF}" \
        -nb "${color0:-#FFFFFF}" \
        -cb "${color0:-#FFFFFF}" \
        -lf "${color7:-#000000}" \
        -bf "${color7:-#000000}" \
        -cf "${color7:-#000000}" \
        -nf "${color7:-#000000}" \
        -fn "Roboto 15" \
        -geometry "600x40-100+80" &
}

reload_openbox() {
    sed -i"" --follow-symlinks \
        -e "s/bg.color: #.*/bg.color: ${color1:-#FFFFFF}/" \
        -e "s/text.color: #.*/text.color: ${color1:-#000000}/" \
        -e "s/image.color: #.*/image.color: ${color1:-#000000}/" \
        "${HOME}/.themes/thicc/openbox-3/themerc"
    openbox --reconfigure
}

reload_bar() {
    sleep 1
    xdo lower -a bar
}

set_scss() {
    sassc --style expanded "${HOME}/projects/startpage/scss/style.scss" > "${HOME}/projects/startpage/style.css"
}

set_spotify() {
    oomoxify-cli ~/.cache/wal/colors-oomox

    if pgrep spotify; then
        pkill spotify
        ~/bin/spotify
    fi
}

main() {
    reload_openbox &
    reload_dunst &
    # reload_bar &
    # set_spotify &
    # set_scss &
    xrdb -merge ~/.cache/wal/rofi.xres &
}

main
